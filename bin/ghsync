#!/bin/bash

set -e
# Sync an hg repo to its git mirror

if [ ! -d "$1/.hg" ]; then
  echo >&2 "$1" does not appear to be a hg repository
  exit 1
fi

cd "$1"
echo ":: Syncing $1"
hg pull -u
echo ":: Exporting"
hg gexport -v
